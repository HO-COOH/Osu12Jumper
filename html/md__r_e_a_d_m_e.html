<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Osu12Jumper: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Osu12Jumper
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><img src="https://github.com/HO-COOH/Osu12Jumper/actions/workflows/linux.yml/badge.svg" alt="Linux Build" style="pointer-events: none;" class="inline"/> <img src="https://github.com/HO-COOH/Osu12Jumper/actions/workflows/windows.yml/badge.svg" alt="Windows Build" style="pointer-events: none;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md0"></a>
Osu 1-2 Jumper</h1>
<p>This projects aims to automatically generate random 1-2 jumps to the beat.</p>
<p>Thanks Sotarks!</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Parser</h2>
<p>Parser is implemented as a single header library in <code><a class="el" href="_osu_parser_8hpp.html" title="A simple header-only library for parsing osu file.">OsuParser.hpp</a></code>.</p>
<p>It is tested by 2 version of osu beatmap, <code>v11</code> and <code>v14</code> respectively.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
Quick Start</h3>
<p>The osu parser is coded following the documentation from the <a href="https://osu.ppy.sh/wiki/en/osu%21_File_Formats/Osu_%28file_format%29">official osu wiki</a>. For full documentation of the members, see generated docs in <code>html/index.html</code> or in the <code><a class="el" href="_osu_parser_8hpp.html" title="A simple header-only library for parsing osu file.">OsuParser.hpp</a></code>.</p>
<h4><a class="anchor" id="autotoc_md3"></a>
Enum Members</h4>
<ul>
<li>Countdown ```cpp enum class Countdown { No, Normal, Half, Double }; ```</li>
<li>SampleSet ```cpp enum class SampleSet { Auto, Normal, Soft, Drum }; ```</li>
<li>HitSound ```cpp enum class HitSound { Normal, Whistle, Finish, Clap }; ```</li>
<li>TimingPoint::Effect ```cpp struct <a class="el" href="struct_timing_point.html">TimingPoint</a> { enum class Effect { Kiai, OmitBarline }; }; ```</li>
<li>Slider::CurveType ```cpp struct <a class="el" href="struct_slider.html">Slider</a> { enum class CurveType { Bezier, CatmullRom, Linear, <a class="el" href="struct_circle.html">Circle</a> }; }; ```</li>
</ul>
<h4><a class="anchor" id="autotoc_md4"></a>
Data Members</h4>
<p>These sections are represented by a <code>struct</code> respectively.</p><ul>
<li><a class="el" href="struct_general.html" title="General information about the originalBeatmap.">General</a> ```cpp struct <a class="el" href="struct_general.html" title="General information about the originalBeatmap.">General</a> { std::string audioFile; int audioLeadIn; int previewTime; Countdown countdown; SampleSet sampleSet; float stackLeniency; Mode mode; bool letterboxInBreaks; bool useSkinSprites; OverlayPosition overlayPosition; std::string skinPreference; bool epilepsyWarning; int countdownOffset; bool specialStyle; bool wideScreenStoryboard; bool samplesMatchPlaybackRate; }; ```</li>
<li><a class="el" href="struct_editor.html" title="Saved settings for the originalBeatmap editor.">Editor</a> ```cpp struct <a class="el" href="struct_editor.html" title="Saved settings for the originalBeatmap editor.">Editor</a> { std::vector&lt;int&gt; bookmarks; float distanceSpacing; float beatDivisor; int gridSize; std::optional&lt;float&gt; timelineZoom; }; ```</li>
<li><a class="el" href="struct_metadata.html" title="Information used to identify the originalBeatmap.">Metadata</a> ```cpp struct <a class="el" href="struct_metadata.html" title="Information used to identify the originalBeatmap.">Metadata</a> { std::string title; std::string titleUnicode; std::string artist; std::string artistUnicode; std::string creator; std::string version; std::string source; std::vector&lt;std::string&gt; tags; int beatmapId; int beatmapSetId; }; ```</li>
<li><a class="el" href="struct_difficulty.html" title="Difficulty settings.">Difficulty</a> ```cpp struct <a class="el" href="struct_difficulty.html" title="Difficulty settings.">Difficulty</a> { float HPDrainRate; float circleSize; float overallDifficulty; float approachRate; float sliderMultiplier; int sliderTickRate; }; ```</li>
<li><p class="startli"><a class="el" href="struct_colors.html">Colors</a> ```cpp struct <a class="el" href="struct_colors.html">Colors</a> { struct Color { unsigned char r; unsigned char g; unsigned char b; };</p>
<p class="startli">std::vector&lt;Color&gt; comboColor; std::optional&lt;Color&gt; sliderTrackOverride; std::optional&lt;Color&gt; sliderBorder; }; ```</p>
</li>
<li><a class="el" href="struct_events.html">Events</a> ```cpp struct <a class="el" href="struct_background.html">Background</a> { int startTime; std::string fileName; int xOffset; int yOffset; }; struct <a class="el" href="struct_video.html">Video</a> { int startTime; std::string fileName; int xOffset; int yOffset; }; struct <a class="el" href="struct_break.html">Break</a> { int startTime; int endTime; }; struct <a class="el" href="struct_events.html">Events</a> { std::vector&lt;Background&gt; backgrounds; std::vector&lt;Video&gt; videos; std::vector&lt;Break&gt; breaks; }; ```</li>
</ul>
<p>These following sections are represented by a <code>std::vector</code> of <code>struct</code> respectively.</p><ul>
<li>TimingPoints -&gt; <code>std::vector&lt;<a class="el" href="struct_timing_point.html">TimingPoint</a>&gt;</code> ```cpp struct <a class="el" href="struct_timing_point.html">TimingPoint</a> { int time; float beatLength; int meter; SampleSet sampleSet; int sampleIndex; int volume; bool uninherited; unsigned effects; }; ``<code></code></li>
<li><p class="startli"><code>HitObjects -&gt;</code>std::vector&lt;std::unique_ptr&lt;HitObject&gt;&gt;<code> </code><a class="el" href="struct_hit_object.html" title="Base class of all hit objects in osu.">HitObject</a><code>is polymorphic so you should instantiate its sub-classes. </code>``cpp struct <a class="el" href="struct_hit_object.html" title="Base class of all hit objects in osu.">HitObject</a> //Base class of all kinds of hit objects { int x; int y; int time; HitSound hitSound; HitSample hitSample; bool isNewCombo; };</p>
<p class="startli">struct <a class="el" href="struct_circle.html">Circle</a> : public <a class="el" href="struct_hit_object.html" title="Base class of all hit objects in osu.">HitObject</a> {}; /* Besides osu! standard, osu! mania / osu! taiko/ osu! catch the beat also uses the same data structure. You should treat its values specific to the game mode (defined in General::Mode) you are dealing with. */</p>
<p class="startli">struct <a class="el" href="struct_slider.html">Slider</a> : public <a class="el" href="struct_hit_object.html" title="Base class of all hit objects in osu.">HitObject</a> { CurveType curveType; std::vector&lt;Coord&gt; curvePoints; int slides; float length; std::vector&lt;int&gt; edgeSounds; std::vector&lt;EdgeSet&gt; edgeSets; }; //Shared in osu! standard / osu! taiko / osu! catch the beat</p>
<p class="startli">struct <a class="el" href="struct_spinner.html">Spinner</a> : public <a class="el" href="struct_hit_object.html" title="Base class of all hit objects in osu.">HitObject</a> { int endTime; }; //Shared in osu! standard / osu! taiko / osu! catch the beat</p>
<p class="startli">struct <a class="el" href="struct_hold.html">Hold</a> : public <a class="el" href="struct_hit_object.html" title="Base class of all hit objects in osu.">HitObject</a> { int endTime; }; //Osu ```</p>
</li>
</ul>
<p>All of above are stored as a member in an <code><a class="el" href="struct_osu_file.html">OsuFile</a></code> struct. </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="struct_osu_file.html">OsuFile</a></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="struct_general.html">General</a> general;</div>
<div class="line">    <a class="code" href="struct_editor.html">Editor</a> editor;</div>
<div class="line">    <a class="code" href="struct_metadata.html">Metadata</a> metaData;</div>
<div class="line">    <a class="code" href="struct_difficulty.html">Difficulty</a> difficulty;</div>
<div class="line">    <a class="code" href="struct_events.html">Events</a> events;</div>
<div class="line">    std::vector&lt;TimingPoint&gt; timingPoints;</div>
<div class="line">    <a class="code" href="struct_colors.html">Colors</a> colors;</div>
<div class="line">    std::vector&lt;std::unique_ptr&lt;HitObject&gt;&gt; hitObjects;</div>
<div class="line">};</div>
</div><!-- fragment --><p>Static member functions are written in the class that can be maximize code-reuse. For example, <code>HitObject::ColumnToX(columnIndex, columnCount)</code> that converts a mania column number to an x-coordinate that osu file needs.</p>
<h4><a class="anchor" id="autotoc_md5"></a>
Parsing</h4>
<ul>
<li>To parse a full <code>.osu</code> file, simply pass in the file name or a <code>std::ifstream</code>. For example, <div class="fragment"><div class="line"><a class="code" href="struct_osu_file.html">OsuFile</a> file{ <span class="stringliteral">&quot;MyMap.osu&quot;</span> };</div>
<div class="line">std::cout &lt;&lt; file.metadata.title;</div>
</div><!-- fragment --></li>
<li>To partially parse a <code>.osu</code> file, it it's one of the <code>struct</code> members in <code><a class="el" href="struct_osu_file.html">OsuFile</a></code>, you do the same with parsing the full <code>.osu</code> file, just simply pass in the file name or a <code>std::ifstream</code>. For example, to parse <code><a class="el" href="struct_metadata.html" title="Information used to identify the originalBeatmap.">Metadata</a></code> only, you do <div class="fragment"><div class="line"><a class="code" href="struct_metadata.html">Metadata</a> meta{ <span class="stringliteral">&quot;MyMap.osu&quot;</span> };</div>
<div class="line">std::cout &lt;&lt; file.metadata.<a class="code" href="struct_metadata.html#a4ef2e2685f50d2a79b973f752f05fc40">title</a>;</div>
</div><!-- fragment --></li>
</ul>
<p>If it's one of the <code>std::vector</code> members, there will be a <code>static</code> helper function starts with <code>Handle...</code> in each of the <code>struct</code> to parse and return it. For example, to parse the <code><a class="el" href="struct_timing_point.html">TimingPoint</a></code> you do </p><div class="fragment"><div class="line"><span class="keyword">auto</span> timingPoints = TimingPoint::HandleTimingPoint(<span class="stringliteral">&quot;MyMap.osu&quot;</span>);</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md6"></a>
Note</h4>
<p>On Windows, specific characters, eg. <code>\/:*?"&lt;&gt;|</code> are <b>NOT</b> allowed in file names. That's why you should usually use the member function <code><a class="el" href="struct_osu_file.html#aa83d5f225925d535810a28585ab60761" title="Return the default file name according to song title, artist and difficulty.">OsuFile::getSaveFileName()</a></code> instead of directly getting members in <code>OsuFile::metadata</code> as filename.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Std -&gt; Mania Converter</h2>
<p>The converter is largely copied from <a href="https://github.com/ppy/osu">osu! lazer</a> in</p><ul>
<li><code>HitObjectPatternGenerator.cs</code></li>
<li><code>DistanceObjectPatternGenerator.cs</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md8"></a>
Todo</h3>
<ol type="1">
<li>Add hit sound</li>
</ol>
<h2><a class="anchor" id="autotoc_md9"></a>
1-2 Jump Generator</h2>
<p>is in <code><a class="el" href="_jump_generator_8hpp_source.html">JumpGenerator.hpp</a></code></p>
<h2><a class="anchor" id="autotoc_md10"></a>
Documentation</h2>
<p>Documentation is in <code>html/index.html</code>.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Test</h2>
<p>Testing code is in <code>test/</code>. There are also 2 beatmaps to be parsed, that will be automatically copied to the testing executable directory. So you do not need to do anything other than running <code>cmake .</code>.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Build</h2>
<h3><a class="anchor" id="autotoc_md13"></a>
Targets</h3>
<ul>
<li>Main ``` mkdir build cd build cmake .. cmake &ndash;build . ``` </li>
</ul>
<h3><a class="anchor" id="autotoc_md14"></a>
Requires</h3>
<ol type="1">
<li><a href="https://github.com/google/googletest">Google Test</a>, I recommend using <a href="https://vcpkg.io/en/index.html">vcpkg</a> to install the package.</li>
<li>C++17 compatible compiler</li>
<li>CMake</li>
</ol>
<h2><a class="anchor" id="autotoc_md15"></a>
Disclaimer</h2>
<p>All conversion algorithms are attribute to <a href="https://github.com/ppy/osu">the osu lazer open-source project</a>. This project might fail to follow ppy's update to osu. Use at your own risk! </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="astruct_metadata_html"><div class="ttname"><a href="struct_metadata.html">Metadata</a></div><div class="ttdoc">Information used to identify the originalBeatmap.</div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:1592</div></div>
<div class="ttc" id="astruct_osu_file_html"><div class="ttname"><a href="struct_osu_file.html">OsuFile</a></div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:1941</div></div>
<div class="ttc" id="astruct_colors_html"><div class="ttname"><a href="struct_colors.html">Colors</a></div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:1507</div></div>
<div class="ttc" id="astruct_editor_html"><div class="ttname"><a href="struct_editor.html">Editor</a></div><div class="ttdoc">Saved settings for the originalBeatmap editor.</div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:575</div></div>
<div class="ttc" id="astruct_events_html"><div class="ttname"><a href="struct_events.html">Events</a></div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:1857</div></div>
<div class="ttc" id="astruct_general_html"><div class="ttname"><a href="struct_general.html">General</a></div><div class="ttdoc">General information about the originalBeatmap.</div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:418</div></div>
<div class="ttc" id="astruct_metadata_html_a4ef2e2685f50d2a79b973f752f05fc40"><div class="ttname"><a href="struct_metadata.html#a4ef2e2685f50d2a79b973f752f05fc40">Metadata::title</a></div><div class="ttdeci">std::string title</div><div class="ttdoc">Romanised song title.</div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:1609</div></div>
<div class="ttc" id="astruct_difficulty_html"><div class="ttname"><a href="struct_difficulty.html">Difficulty</a></div><div class="ttdoc">Difficulty settings.</div><div class="ttdef"><b>Definition:</b> OsuParser.hpp:647</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
